<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>moveit2: Migration Notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">moveit2
   </div>
   <div id="projectbrief">The MoveIt Motion Planning Framework for ROS 2.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Migration Notes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>API changes in MoveIt releases</p>
<h1><a class="anchor" id="autotoc_md15"></a>
ROS Noetic</h1>
<ul>
<li>RobotModel no longer overrides empty URDF collision geometry by matching the visual geometry of the link.</li>
<li>Planned trajectories are <em>slow</em> by default. The default values of the <code>velocity_scaling_factor</code> and <code>acceleration_scaling_factor</code> can now be customized and default to 0.1 instead of 1.0. The values can be changed by setting the parameters <code>default_acceleration_scaling_factor</code> and <code>default_velocity_scaling_factor</code> in the <code>joint_limits.yaml</code> of your robot's <code>moveit_config</code> package. Consider setting them to values between 0.2 and 0.6, to allow for significant speedup/slowdown of your application. Additionally, you can always change the factors per request with the corresponding methods in the <a href="http://docs.ros.org/melodic/api/moveit_ros_planning_interface/html/classmoveit_1_1planning__interface_1_1MoveGroupInterface.html#a3e2bd2edccca8aa49a6bec9d039d5bf3">move_group_interface</a>, the <a href="http://docs.ros.org/melodic/api/moveit_commander/html/classmoveit__commander_1_1move__group_1_1MoveGroupCommander.html#a7706effa66a0847496de477cf219a562">MoveGroupCommander</a> or in the Rviz interface. (<a href="https://github.com/ros-planning/moveit/pull/1890">1890</a>)</li>
<li>Extended the return value of <code><a class="el" href="namespaceplan__with__constraints.html#ad98040293eeabd17f40a72a60f1146c4">MoveitCommander.MoveGroup.plan()</a></code> from <code>trajectory</code> to a tuple of <code>(success, trajectory, planning_time, error_code)</code> to better match the C++ MoveGroupInterface (<a href="https://github.com/ros-planning/moveit/pull/790/">790</a>)</li>
<li><code>moveit_rviz.launch</code>, generated by MSA, provides an argument <code>rviz_config</code> to configure the rviz config to be used. The old boolean config argument was dropped. (<a href="https://github.com/ros-planning/moveit/pull/1397">1397</a>)</li>
<li>Moved the example package <code><a class="el" href="namespacemoveit__controller__manager__example.html">moveit_controller_manager_example</a></code> into <a href="https://github.com/ros-planning/moveit_tutorials">moveit_tutorials</a></li>
<li>Requests to <code>get_planning_scene</code> service without explicitly setting "components" now return full scene</li>
<li><code>moveit_ros_planning</code> no longer depends on <code>moveit_ros_perception</code></li>
<li><code>CollisionRobot</code> and <code>CollisionWorld</code> are combined into a single <code>CollisionEnv</code> class. This applies for all derived collision checkers as <code>FCL</code>, <code>ALL_VALID</code>, <code>HYBRID</code> and <code>DISTANCE_FIELD</code>. Consequently, <code>getCollisionRobot[Unpadded] / getCollisionWorld</code> functions are replaced through a <code>getCollisionEnv</code> in the planning scene and return the new combined environment. This unified collision environment provides the union of all member functions of <code>CollisionRobot</code> and <code>CollisionWorld</code>. Note that calling <code>checkRobotCollision</code> of the <code>CollisionEnv</code> does not take a <code>CollisionRobot</code> as an argument anymore as it is implicitly contained in the <code>CollisionEnv</code>.</li>
<li><code>RobotTrajectory</code> provides a copy constructor that allows a shallow (default) and deep copy of waypoints</li>
<li>Replace the redundant namespaces <code>robot_state::</code> and <code>robot_model::</code> with the actual namespace <code><a class="el" href="namespacemoveit_1_1core.html" title="Core components of MoveIt.">moveit::core</a>::</code>. The additional namespaces will disappear in the future (ROS2).</li>
<li>Moved the library <code><a class="el" href="namespacemoveit__cpp.html">moveit_cpp</a></code> to <code>moveit_ros_planning</code>. The classes are now in namespace <code><a class="el" href="namespacemoveit__cpp.html">moveit_cpp</a></code>, access via <code><a class="el" href="namespacemoveit_1_1planning__interface.html" title="Simple interface to MoveIt components.">moveit::planning_interface</a></code> is deprecated.</li>
<li>The joint states of <code>passive</code> joints must be published in ROS and the CurrentStateMonitor will now wait for them as well. Their semantics dictate that they cannot be actively controlled, but they must be known to use the full robot state in collision checks. (<a href="https://github.com/ros-planning/moveit/pull/2663">https://github.com/ros-planning/moveit/pull/2663</a>)</li>
<li>Removed deprecated header <code><a class="el" href="deprecation_8h.html">moveit/macros/deprecation.h</a></code>. Use <code>[[deprecated]]</code> instead.</li>
<li>All uses of <code>MOVEIT_CLASS_FORWARD</code> et. al. must now be followed by a semicolon for consistency (and to get -pedantic builds to pass for the codebase).</li>
</ul>
<h1><a class="anchor" id="autotoc_md16"></a>
ROS Melodic</h1>
<ul>
<li>Migration to <code>tf2</code> API.</li>
<li>Replaced Eigen::Affine3d with Eigen::Isometry3d, which is computationally more efficient. Simply find-replace occurences of Affine3d: <code>find . -iname "*.[hc]*" -print0 | xargs -0 sed -i 's#Affine3#Isometry3#g'</code></li>
<li>The <a class="el" href="namespacemove__group.html">move_group</a> capability <code>ExecuteTrajectoryServiceCapability</code> has been removed in favor of the improved <code>ExecuteTrajectoryActionCapability</code> capability. Since Indigo, both capabilities were supported. If you still load default capabilities in your <code>config/launch/move_group.launch</code>, you can just remove them from the capabilities parameter. The correct default capabilities will be loaded automatically.</li>
<li>Deprecated method <code>CurrentStateMonitor::waitForCurrentState(double wait_time)</code> was finally removed.</li>
<li>Renamed <code>RobotState::getCollisionBodyTransforms</code> to <code>getCollisionBodyTransform</code> as it returns a single transform only.</li>
<li>Removed deprecated class MoveGroup (was renamed to MoveGroupInterface).</li>
<li>KinematicsBase: Deprecated members <code>tip_frame_</code>, <code>search_discretization_</code>. Use <code>tip_frames_</code> and <code>redundant_joint_discretization_</code> instead.</li>
<li>KinematicsBase: Deprecated <code>initialize(robot_description, ...)</code> in favour of <code>initialize(robot_model, ...)</code>. Adapt your kinematics plugin to directly receive a <code>RobotModel</code>. See the <a href="https://github.com/ros-planning/moveit/tree/melodic-devel/moveit_kinematics/kdl_kinematics_plugin">KDL plugin</a> for an example.</li>
<li>IK: Removed notion of IK attempts and redundant random seeding in RobotState::setFromIK(). Number of attempts is limited by timeout only. (<a href="https://github.com/ros-planning/moveit/pull/1288">#1288</a>) Remove parameters <code>kinematics_solver_attempts</code> from your <code>kinematics.yaml</code> config files.</li>
<li><code>RDFLoader</code> / <code>RobotModelLoader</code>: removed TinyXML-based API (<a href="https://github.com/ros-planning/moveit/pull/1254">https://github.com/ros-planning/moveit/pull/1254</a>)</li>
<li>Deprecated <code>EndEffectorInteractionStyle</code> got removed from <code>RobotInteraction</code> (<a href="https://github.com/ros-planning/moveit/pull/1287">https://github.com/ros-planning/moveit/pull/1287</a>) Use <a href="https://github.com/ros-planning/moveit/pull/1287/files#diff-24e57a8ea7f2f2d8a63cfc31580d09ddL240">the corresponding <code>InteractionStyle</code> definitions</a> instead</li>
</ul>
<h1><a class="anchor" id="autotoc_md17"></a>
ROS Kinetic</h1>
<ul>
<li>In the C++ MoveGroupInterface class the <code><a class="el" href="namespaceplan__with__constraints.html#ad98040293eeabd17f40a72a60f1146c4">plan()</a></code> method returns a <code>MoveItErrorCode</code> object and not a boolean. <code>static_cast&lt;bool&gt;(<a class="el" href="namespaceplan__with__constraints.html#ad98040293eeabd17f40a72a60f1146c4">mgi.plan()</a>)</code> can be used to achieve the old behavior.</li>
<li><code>CurrentStateMonitor::waitForCurrentState(double wait_time)</code> has been renamed to <code>waitForCompleteState</code> to better reflect the actual semantics. Additionally a new method <code>waitForCurrentState(const ros::Time t = ros::Time::now())</code> was added that actually waits until all joint updates are newer than <code>t</code>.</li>
<li>To avoid deadlocks, the PlanningSceneMonitor listens to its own EventQueue, monitored by an additional spinner thread. Providing a custom NodeHandle, a user can control which EventQueue and processing thread is used instead. Providing a default NodeHandle, the old behavior (using the global EventQueue) can be restored, which is however not recommended. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
