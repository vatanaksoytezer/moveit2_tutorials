<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>moveit2: MoveIt 2 Migration Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">moveit2
   </div>
   <div id="projectbrief">The MoveIt Motion Planning Framework for ROS 2.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MoveIt 2 Migration Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md11"></a>
Logging</h1>
<p>In MoveIt 1 we commonly use named ROS logging macros (i.e. <code>ROS_INFO_NAMED</code>) with file-specific logger names defined as <code>constexpr char LOGNAME[]="logger_name"</code>. ROS 2 provides similar macros (i.e. <code>RCLCPP_INFO</code>) that instead of an optional name always require a <code>rclcpp::Logger</code> instance for scoping the namespace. All source files that use ROS logging should now define a file-specific <code>static const rclcpp::Logger</code> named <code>LOGGER</code>, located at the top of the file and inside the namespace with the narrowest scope (if there is one). This leads to the following basic migration steps:</p>
<ol type="1">
<li><p class="startli">Replace <code>LOGNAME</code> with <code>rclcpp::Logger</code> instance:</p>
<p class="startli"><b>Old:</b> </p><pre class="fragment">constexpr char LOGNAME[] = "logger_name";
</pre><p class="startli"><b>New:</b> </p><pre class="fragment">static const rclcpp::Logger LOGGER = rclcpp::get_logger("logger_name");
</pre></li>
<li><p class="startli">Replace logging macros:</p>
<p class="startli"><b>Old:</b> </p><pre class="fragment">ROS_INFO_NAMED(LOGNAME, "Very important info message");
</pre><p class="startli"><b>New:</b> </p><pre class="fragment">RCLCPP_INFO(LOGGER, "Very important info message");
</pre></li>
</ol>
<h2><a class="anchor" id="autotoc_md12"></a>
Logger naming convention</h2>
<p>Migrating the loggers is a good opportunity to make logger names more consistent. In order to create unique and descriptive logger names we encourage the following naming pattern: general <code>LIBRARY_NAME.SOURCE_FILE_NAME</code>. For instance, the file <code><a class="el" href="joint__model__group_8cpp.html">joint_model_group.cpp</a></code> inside the library <code>moveit_robot_model</code> contains the following logger: </p><pre class="fragment">static const rclcpp::Logger LOGGER = rclcpp::get_logger("moveit_robot_model.joint_model_group");
</pre><p>For finding the <code>LIBRARY_NAME</code> refer to the line <code><a class="el" href="ros_2warehouse_2warehouse_2CMakeLists_8txt.html#af4423e580afb68aec7c40fb0bce7d5d4">set(MOVEIT_LIB_NAME LIBRARY_NAME)</a></code> at the top of the library's <code>CMakeLists.txt</code>. If the source file name is the same or very similar to the library name it is sufficient to only use the source file name.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Logging in header files</h2>
<p>Some classes declared in header files may contain log messages, for instance to warn about not-implemented virtual functions in abstract classes. <a class="el" href="classA.html">A</a> logger defined in the header file would not tell us what derived class is missing the implementation, since the source name would be resolved from the header file. For this case, the base class should declare a private member variable <code>static const rclcpp::Logger LOGGER</code> which is to be defined in the implementing class using the corresponding source file name. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
