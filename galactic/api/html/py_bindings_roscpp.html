<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>moveit2: Creating Python bindings for C++ classes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">moveit2
   </div>
   <div id="projectbrief">The MoveIt Motion Planning Framework for ROS 2.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Creating Python bindings for C++ classes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section user"><dt>Problem</dt><dd>When creating Python bindings of C++ classes it may be necessary to have roscpp initialized (ros::init() called) when the instance of a particular C++ class is created. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>For example, say we need python bindings for class Foo; <a class="el" href="classA.html">A</a> common approach to define functionality specific for the wrappers is to define: <div class="fragment"><div class="line"><span class="keyword">class </span>FooWrapper : <span class="keyword">public</span> Foo</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">...</div>
<div class="line">};</div>
</div><!-- fragment --> This allows defining additional functions in FooWrapper that are more amenable to the construction of Python bindings. Say that FooWrapper is now constructed because a Python programmer created the instance of the wrapped object. At that point, if Foo needs ros::init() to have been called, there is an error, because even if rospy is initialized, roscpp is not. </dd></dl>
<dl class="section user"><dt>Solutions</dt><dd>We can update class FooWrapper using the moveit_py_bindings_tools::ROScppInitializer class like so: <div class="fragment"><div class="line"><span class="keyword">class </span>FooWrapper : <span class="keyword">protected</span> ROScppInitializer</div>
<div class="line">                   <span class="keyword">public</span> Foo</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">FooWrapper(...) : ROScppInitializer(),</div>
<div class="line">                  Foo(...)</div>
<div class="line">{ }</div>
<div class="line">...</div>
<div class="line">};</div>
</div><!-- fragment --> This way it is ensured that the constructor of ROScppInitialier is called right before the instance of Foo is constructed (in the process of constructing FooWrapper). The advantage of this solution is that the Python programmer could not care less what roscpp is doing. Things will "just work". The downside of this solution is that if any command line arguments have been passed to the Python program, they are not forwarded to roscpp. But to forward these parameters an explicit function call needs to be made. For that we provide a function call </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
